### Основные задачи Backend разработчика

**Фаза 1: Инфраструктура (дни 1-3)**
1. Настроить структуру проекта FastAPI
2. Создать все модели SQLAlchemy с relationships
3. Написать первую миграцию Alembic
4. Настроить async database session
5. Реализовать JWT аутентификацию с ролями

**Фаза 2: Базовый CRUD (дни 4-7)**
6. API для Cinema, Hall, Seat (с проверкой вместимости)
7. API для Film с фильтрацией по жанрам
8. API для Distributor
9. API для RentalContract с валидацией дат и процентов
10. API для Session с проверкой конфликтов по времени/залу

**Фаза 3: Бронирование (дни 8-12)**
11. Система бронирования с проверкой доступности места
12. Резервирование мест на 5 минут (background task)
13. Создание Order с Ticket
14. Mock Payment с сохранением деталей
15. Генерация QR кодов (библиотека qrcode)
16. Валидация QR кодов при входе

**Фаза 4: Бизнес-логика (дни 13-17)**
17. Бонусная система: начисление 10% при покупке
18. Бонусная система: списание бонусов
19. Применение промокодов с валидацией
20. Кинобар: CRUD для ConcessionItem
21. Кинобар: ConcessionPreorder с генерацией кода выдачи
22. Расчет с дистрибьюторами по неделям проката
23. Создание PaymentHistory автоматически

**Фаза 5: Отчеты (дни 18-20)**
24. Отчет по выручке кинотеатра (PDF/Excel)
25. Отчет по популярным фильмам
26. Отчет по расчетам с дистрибьюторами
27. Отчет по продажам кинобара

**Best practices**:
- Используй `relationship(back_populates=...)` для всех FK
- Async endpoints с `async def`
- Dependency injection для DB session и current_user
- Enum для статусов (Статус_билета, Статус_заказа и т.д.)
- Логирование всех операций с деньгами
- Транзакции для критичных операций (бронирование, оплата)
