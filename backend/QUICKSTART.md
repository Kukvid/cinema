N# Quick Start Guide - Cinema Management System

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd backend
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/`:
```env
DATABASE_URL=postgresql+asyncpg://postgres:your_password@localhost:5432/cinema_db
SECRET_KEY=your-secret-key-here
DEBUG=True
DB_ECHO=False
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL
psql -U postgres

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É
CREATE DATABASE cinema_db;
\q
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î
```bash
python create_db.py
```
–í–≤–µ–¥–∏—Ç–µ `yes` –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

### 5. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```bash
python seed.py
```

### 6. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
uvicorn app.main:app --reload
```

–ì–æ—Ç–æ–≤–æ! –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

---

## –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- Email: `admin@cinema.ru`
- Password: `admin123`

### –ú–µ–Ω–µ–¥–∂–µ—Ä
- Email: `manager@cinema.ru`
- Password: `manager123`

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- Email: `user@example.com`, `ivan@example.com`, `maria@example.com`, –∏ –¥—Ä.
- Password: `user123` (–¥–ª—è –≤—Å–µ—Ö)

---

## –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ?

‚úÖ **3 –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞** –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö (–ú–æ—Å–∫–≤–∞, –°–ü–±, –ö–∞–∑–∞–Ω—å)
‚úÖ **6-9 –∑–∞–ª–æ–≤** —Å –º–µ—Å—Ç–∞–º–∏ (8 —Ä—è–¥–æ–≤ √ó 12 –º–µ—Å—Ç = 96 –º–µ—Å—Ç –Ω–∞ –∑–∞–ª)
‚úÖ **20 —Ñ–∏–ª—å–º–æ–≤** (–æ—Ç –Ω–æ–≤–∏–Ω–æ–∫ –¥–æ –∫–ª–∞—Å—Å–∏–∫–∏)
‚úÖ **50+ —Å–µ–∞–Ω—Å–æ–≤** –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ 7 –¥–Ω–µ–π
‚úÖ **8 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —Å –±–æ–Ω—É—Å–Ω—ã–º–∏ —Å—á–µ—Ç–∞–º–∏
‚úÖ **7 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤** (WELCOME10, NEWYEAR2024, BIRTHDAY20, –∏ –¥—Ä.)
‚úÖ **57 —Ç–æ–≤–∞—Ä–æ–≤ –∫–∏–Ω–æ–±–∞—Ä–∞** (–ø–æ–ø–∫–æ—Ä–Ω, –Ω–∞–ø–∏—Ç–∫–∏, —Å–Ω–µ–∫–∏)
‚úÖ **10-15 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤** —Å –±–∏–ª–µ—Ç–∞–º–∏ –∏ QR –∫–æ–¥–∞–º–∏

---

## –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã

| –ö–æ–¥ | –°–∫–∏–¥–∫–∞ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ |
|-----|--------|-------------------|
| WELCOME10 | 10% | 500‚ÇΩ |
| NEWYEAR2024 | 500‚ÇΩ | 1000‚ÇΩ |
| BIRTHDAY20 | 20% | 300‚ÇΩ |
| WEEKEND15 | 15% | 600‚ÇΩ |
| STUDENT | 200‚ÇΩ | 400‚ÇΩ |

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î —Å –Ω—É–ª—è
```bash
python create_db.py  # –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É
python seed.py       # –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–º–∏
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
```bash
psql -U postgres -d cinema_db -c "\dt"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ
```bash
psql -U postgres cinema_db
SELECT * FROM users;
SELECT * FROM films;
\q
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ models/          # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ schemas/         # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ routers/         # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã (security, qr_generator)
‚îÇ   ‚îú‚îÄ‚îÄ database.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.py          # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ create_db.py         # –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º—ã –ë–î
‚îú‚îÄ‚îÄ seed.py              # –°–∫—Ä–∏–ø—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ requirements.txt     # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é)
‚îú‚îÄ‚îÄ README_SETUP.md      # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îî‚îÄ‚îÄ QUICKSTART.md        # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## API Endpoints

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger UI:** http://localhost:8000/docs
- **ReDoc:** http://localhost:8000/redoc
- **OpenAPI Schema:** http://localhost:8000/openapi.json

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- `POST /api/auth/login` - –í—Ö–æ–¥
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**–§–∏–ª—å–º—ã:**
- `GET /api/films` - –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
- `GET /api/films/{id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ
- `GET /api/films/{id}/sessions` - –°–µ–∞–Ω—Å—ã —Ñ–∏–ª—å–º–∞

**–°–µ–∞–Ω—Å—ã:**
- `GET /api/sessions` - –°–ø–∏—Å–æ–∫ —Å–µ–∞–Ω—Å–æ–≤
- `GET /api/sessions/{id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–∞–Ω—Å–µ
- `GET /api/sessions/{id}/seats` - –ú–µ—Å—Ç–∞ –≤ –∑–∞–ª–µ

**–ó–∞–∫–∞–∑—ã:**
- `POST /api/orders` - –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
- `GET /api/orders/{id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
- `GET /api/orders/my` - –ú–æ–∏ –∑–∞–∫–∞–∑—ã

**–ë–∏–ª–µ—Ç—ã:**
- `POST /api/tickets` - –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç
- `GET /api/tickets/{id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∏–ª–µ—Ç–µ
- `POST /api/tickets/{id}/validate` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∏–ª–µ—Ç

**–ü—Ä–æ–º–æ–∫–æ–¥—ã:**
- `POST /api/promocodes/validate` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
- `GET /api/promocodes` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ (admin)

**–ö–∏–Ω–æ–±–∞—Ä:**
- `GET /api/concessions` - –¢–æ–≤–∞—Ä—ã –∫–∏–Ω–æ–±–∞—Ä–∞
- `POST /api/concessions/preorder` - –ü—Ä–µ–¥–∑–∞–∫–∞–∑

**–ë–æ–Ω—É—Å—ã:**
- `GET /api/bonuses/account` - –ú–æ–π –±–æ–Ω—É—Å–Ω—ã–π —Å—á–µ—Ç
- `GET /api/bonuses/transactions` - –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

---

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
```bash
curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "user123"
  }'
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
```bash
curl "http://localhost:8000/api/films"
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–µ–∞–Ω—Å—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
```bash
curl "http://localhost:8000/api/sessions?date=2024-11-23"
```

### –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
```bash
curl -X POST "http://localhost:8000/api/promocodes/validate" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "code": "WELCOME10"
  }'
```

---

## Troubleshooting

### –û—à–∏–±–∫–∞: "Connection refused"
‚û°Ô∏è –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:
```bash
# Windows: services.msc ‚Üí PostgreSQL
# Linux: sudo systemctl status postgresql
# macOS: brew services list
```

### –û—à–∏–±–∫–∞: "Database does not exist"
‚û°Ô∏è –°–æ–∑–¥–∞–π—Ç–µ –ë–î:
```bash
psql -U postgres -c "CREATE DATABASE cinema_db;"
```

### –û—à–∏–±–∫–∞: "ModuleNotFoundError"
‚û°Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

### Seed —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
‚û°Ô∏è –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR –∫–æ–¥–æ–≤ –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –∑–∞–Ω–∏–º–∞–µ—Ç 10-30 —Å–µ–∫—É–Ω–¥.

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò–∑—É—á–∏—Ç–µ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: http://localhost:8000/docs
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
4. ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –¥–ª—è –≤–∞—à–µ–≥–æ frontend

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [README_SETUP.md](README_SETUP.md)
- **FastAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://fastapi.tiangolo.com/
- **SQLAlchemy –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://docs.sqlalchemy.org/
- **PostgreSQL –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://www.postgresql.org/docs/

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!** üé¨üçø
